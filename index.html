<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="icon" href="images/favicon.ico" type="image/x-icon">
  <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">
  <title>SoloBG | سولوی بردگیم‌ها</title>
  <style>
    :root{
      --bg: #eef6ef;
      --card-bg: #fffaf0;
      --card-hover-bg: #e9fff4;
      --muted: #5b5f66;
      --accent: #0b2a16;
      --max-width: 820px;
      --gutter: 20px;
      --thumb-radius: 42px;

      /* unified social / share size */
      --share-size:44px;

      --btn-size:56px;
      --go-top-bg: #0bb07a;
      --transition-fast: 180ms cubic-bezier(.2,.9,.26,1);

      /* card hover shadow (thin & slightly stronger) */
      --card-hover-shadow: 0 6px 18px rgba(11,42,22,0.18), 0 2px 6px rgba(11,42,22,0.12);

      /* drop-shadow used only on the social PNG pixels (no rectangle) */
      --social-drop: 0 6px 10px rgba(11,42,22,0.16);
      --social-drop-hover: 0 12px 22px rgba(11,42,22,0.20);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg, rgba(0,0,0,0.02), transparent 1px) top left / 24px 24px, var(--bg);
      color:var(--accent);
      padding:28px 12px;
    }

    .container{ width:100%; max-width:var(--max-width); padding:12px; margin:0 auto; }

    header.site-header{ display:flex; gap:14px; align-items:center; justify-content:space-between; margin-bottom:14px; }

    .logo{
      display:flex;
      gap:10px;
      align-items:center;
      background: linear-gradient(90deg, rgba(15,122,64,0.08), rgba(0,160,255,0.06));
      padding:10px 14px;
      border-radius:12px;
    }

    /* Larger site PNG logo */
    .site-logo{
      width:64px;
      height:64px;
      flex:0 0 64px;
      object-fit:cover;
      border-radius:10px;
      display:block;
    }

    .logo h1{ margin:0; font-size:18px; font-weight:700; }
    .logo p{ margin:0; font-size:12px; color:var(--muted) }

    .muted{ color:var(--muted); font-size:13px }

    /* Card */
    .card{
      background: var(--card-bg);
      border-radius:16px;
      padding:18px;
      margin: 0 0 var(--gutter);
      border:1px solid rgba(11,42,22,0.03);
      transition: background var(--transition-fast), border-color var(--transition-fast), box-shadow var(--transition-fast), transform var(--transition-fast);
      will-change: background, box-shadow, transform;
    }
    .card:hover{
      background: var(--card-hover-bg);
      border-color: rgba(11,42,22,0.06);
      box-shadow: var(--card-hover-shadow);
      transform: translateZ(0);
    }

    .thumb{ position:relative; display:block; border-radius:var(--thumb-radius); overflow:hidden; aspect-ratio:16/9; background:linear-gradient(180deg, rgba(0,0,0,0.12), rgba(0,0,0,0.04)); }

    .thumb img{ width:100%; height:100%; object-fit:cover; display:block; transform: scale(1); transition: transform 420ms cubic-bezier(.2,.9,.26,1), filter 420ms ease; will-change: transform, filter; }
    .card:hover .thumb img, .thumb:hover img{ transform: scale(1.08); filter: saturate(1.06) contrast(1.02); }

    .thumb .title{
      position:absolute; bottom:14px; right:14px; color:#fff; font-weight:700; font-size:16px;
      text-shadow: 0 8px 30px rgba(0,0,0,0.6);
      padding:10px 14px; border-radius:12px;
      background: linear-gradient(90deg, rgba(0,0,0,0.46), rgba(255,255,255,0.02));
      pointer-events:none; max-width:62%; text-align:right; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
      transition: background var(--transition-fast);
    }
    .card:hover .thumb .title{ background: linear-gradient(90deg, rgba(0,0,0,0.64), rgba(255,255,255,0.02)); }

    .thumb .duration{
      position:absolute; left:14px; bottom:12px; display:inline-flex; gap:8px; align-items:center;
      background:rgba(0,0,0,0.65); color:#fff; padding:8px 12px; border-radius:12px; font-weight:700; font-size:15px;
    }
    .thumb .duration svg{ width:16px; height:16px; opacity:0.98; }

    .meta{ margin-top:14px; display:flex; gap:10px; align-items:center; justify-content:flex-end; flex-wrap:wrap; }

    .social-btn, .share-btn {
      width: var(--share-size);
      height: var(--share-size);
      display:inline-grid;
      place-items:center;
      padding:0;
      border:0;
      background:transparent;
      cursor:pointer;
      position:relative;
      text-decoration:none;
      flex: 0 0 var(--share-size);
      transition: transform 180ms ease;
    }

    .social-btn img, .share-btn img {
      width: 86%;
      height: 86%;
      object-fit:contain;
      display:block;
      pointer-events:none;
      user-select:none;
      filter: drop-shadow(var(--social-drop));
      -webkit-filter: drop-shadow(var(--social-drop));
      transition: transform 180ms ease, filter 180ms ease;
      transform-origin:center center;
      will-change: transform, filter;
    }

    .social-btn:hover img, .share-btn:hover img {
      transform: scale(1.12);
      filter: drop-shadow(var(--social-drop-hover));
      -webkit-filter: drop-shadow(var(--social-drop-hover));
    }

    .social-btn, .share-btn { background:transparent; border:none; box-shadow:none; border-radius:0; }

    .desc{ margin-top:12px; color:var(--muted); font-size:15px; line-height:1.6; display:-webkit-box; -webkit-box-orient:vertical; -webkit-line-clamp:2; overflow:hidden; text-overflow:ellipsis; }

    .hint{ margin-top:18px; text-align:center; font-size:13px; color:var(--muted); }

    .to-top{
      position: fixed;
      left: calc(50% - var(--max-width) / 2 - 18px);
      bottom: 28px;
      width: var(--btn-size);
      height: var(--btn-size);
      border-radius: 12px;
      padding: 10px;
      border: 0;
      display:inline-grid;
      place-items:center;
      z-index:1400;
      transform: translateY(12px) scale(.96);
      opacity: 0;
      pointer-events: none;
      transition: opacity 220ms ease, transform 220ms cubic-bezier(.2,.9,.26,1);
      color: #fff;
      background: var(--go-top-bg);
      box-shadow: 0 10px 22px rgba(2,6,23,0.12);
    }
    .to-top.show{ opacity:1; transform: translateY(0) scale(1); pointer-events:auto; }

    @media (max-width:880px){
      .to-top{ left: 14px !important; bottom: 18px; }
      :root{ --share-size:40px; --thumb-radius:34px; --max-width:720px }
    }
    @media (max-width:480px){
      .to-top{ left: 12px !important; bottom: 14px; }
      :root{ --share-size:36px }
      .thumb .title{ font-size:14px; padding:6px 10px; bottom:10px; max-width:68% }
      .thumb .duration{ font-size:14px; padding:6px 8px }
      .site-logo{ width:56px; height:56px; flex:0 0 56px; }
    }
  </style>
</head>
<body>
  <div class="container" role="main">
    <header class="site-header" role="banner">
      <div class="branding">
        <div class="logo" title="SoloBG - بازی‌های یک‌نفره">
          <!-- PNG logo only (SVG removed to eliminate colored rectangle) -->
          <img src="images/logo.png" alt="SoloBG logo" class="site-logo" width="64" height="64">
          <div>
            <h1>Solo Board Games</h1>
            <p>آموزش سولو (تک‌نفره)ی بردگیم‌ها همراه با یک دور بازی</p>
          </div>
        </div>
      </div>
    </header>

    <main id="feed" aria-live="polite"></main>

    <div class="hint">پایین اسکرول کنید یا روی کارت‌ها کلیک کنید تا ویدیو را در شبکه مربوطه باز کنید.</div>
  </div>

  <button id="btnToTop" class="to-top" aria-hidden="true" title="بازگشت به بالا" aria-label="بازگشت به بالا">
    <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 4.5c-.3 0-.59.11-.82.34l-7 7a1.16 1.16 0 001.64 1.66L12 7.3l6.18 6.18a1.16 1.16 0 001.64-1.66l-7-7A1.16 1.16 0 0012 4.5z"/></svg>
  </button>

  <script>
    const sample = [
      {
        title: "آموزش و یک دور بازی قلعه‌ی سفید",
        duration: "9:12",
        image: "images/thumbs/0001-the-white-castle.jpg",
        desc: "آموزش و یک دور بازی قلعه‌ی سفید - The White Castle",
        links: { youtube: "https://www.youtube.com" }
      },
      {
        title: "راهنمای استراتژی: مدیریت منابع",
        duration: "12:03",
        image: "https://images.unsplash.com/photo-1542751371-adc38448a05e?q=80&w=1400&auto=format&fit=crop",
        desc: "استراتژی‌های اصلی مدیریت منابع در بازی‌های دشوار و طولانی.",
        links: { youtube: "https://www.youtube.com/watch?v=3JZ_D3ELwOQ" }
      },
      {
        title: "مثال: اجرای سناریوی یک‌نفره",
        duration: "7:45",
        image: "https://images.unsplash.com/photo-1509099836639-18ba1b7d9f75?q=80&w=1400&auto=format&fit=crop",
        desc: "اجرای یک سناریوی نمونه و تحلیل تصمیم‌ها و نتایج.",
        links: { youtube: "https://www.youtube.com/watch?v=V-_O7nl0Ii0" }
      }
    ];

    const feed = document.getElementById('feed');

    function esc(s){ if(s === undefined || s === null) return ''; return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#39;'); }

    function createCard(item, idx){
      const id = 'video-' + (idx + 1);
      const card = document.createElement('article');
      card.className = 'card';
      card.id = id;
      const youtubeLink = item.links && item.links.youtube ? item.links.youtube : '#';
      card.innerHTML = `
        <a class="thumb" href="${esc(youtubeLink)}" target="_blank" rel="noopener noreferrer" aria-label="${esc(item.title)}">
          <img loading="lazy" decoding="async" src="${esc(item.image)}" alt="${esc(item.title)}">
          <div class="title">${esc(item.title)}</div>
          <div class="duration" aria-hidden="true">
            <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false"><circle cx="12" cy="12" r="9" fill="none" stroke="#fff" stroke-width="1.4"/><path d="M12 7.5v4l2 1" fill="none" stroke="#fff" stroke-width="1.4" stroke-linecap="round"/></svg>
            <span>${esc(item.duration)}</span>
          </div>
        </a>

        <div class="meta" aria-hidden="false">
          <a class="social-btn youtube" href="${esc(youtubeLink)}" target="_blank" aria-label="YouTube" title="YouTube" rel="noopener noreferrer">
            <img src="images/youtube.png" alt="YouTube">
          </a>

          <a class="social-btn" href="#" aria-label="Instagram" title="Instagram" rel="noopener noreferrer">
            <img src="images/instagram.png" alt="Instagram">
          </a>

          <a class="social-btn" href="#" aria-label="Telegram" title="Telegram" rel="noopener noreferrer">
            <img src="images/telegram.png" alt="Telegram">
          </a>

          <a class="social-btn" href="#" aria-label="Aparat" title="Aparat" rel="noopener noreferrer">
            <img src="images/aparat.png" alt="Aparat">
          </a>

          <button class="share-btn" data-video-id="${id}" aria-label="اشتراک‌گذاری" title="اشتراک‌گذاری">
            <img src="images/share.png" alt="اشتراک">
          </button>
        </div>

        <p class="desc">${esc(item.desc)}</p>
      `;
      return card;
    }

    sample.forEach((it, idx) => feed.appendChild(createCard(it, idx)));

    feed.addEventListener('click', async function(e){
      const btn = e.target.closest('.share-btn');
      if(!btn) return;
      e.preventDefault();
      const vid = btn.getAttribute('data-video-id') || '';
      const url = location.origin + location.pathname + (vid ? ('#' + vid) : '');
      const title = document.title || 'SoloBG';
      if(navigator.share){
        try{ await navigator.share({ title, url }); showShareTip(btn, 'به اشتراک گذاشته شد'); return; } catch(err){}
      }
      try{
        if(navigator.clipboard && navigator.clipboard.writeText){
          await navigator.clipboard.writeText(url);
          showShareTip(btn, 'لینک کپی شد');
        } else {
          const ta = document.createElement('textarea'); ta.value = url; document.body.appendChild(ta); ta.select();
          document.execCommand('copy'); ta.remove(); showShareTip(btn, 'لینک کپی شد');
        }
      } catch(err){ showShareTip(btn, 'کپی نشد'); }
    });

    function showShareTip(btn, text){
      const old = btn.querySelector('.share-tooltip');
      if(old) old.remove();
      const tip = document.createElement('div');
      tip.className = 'share-tooltip';
      tip.textContent = text;
      tip.style.position = 'absolute';
      tip.style.bottom = '100%';
      tip.style.right = '0';
      tip.style.background = 'rgba(0,0,0,0.8)';
      tip.style.color = '#fff';
      tip.style.padding = '6px 8px';
      tip.style.borderRadius = '8px';
      tip.style.fontSize = '12px';
      btn.appendChild(tip);
      setTimeout(()=> tip.remove(), 1600);
    }

    const topBtn = document.getElementById('btnToTop');
    function scrollTop(){ return window.scrollY || window.pageYOffset || document.documentElement.scrollTop; }
    function updTop(){ if(scrollTop() > 20){ topBtn.classList.add('show'); topBtn.setAttribute('aria-hidden','false'); } else { topBtn.classList.remove('show'); topBtn.setAttribute('aria-hidden','true'); } }
    topBtn.addEventListener('click', ()=> window.scrollTo({ top:0, behavior:'smooth' }));
    window.addEventListener('scroll', updTop, { passive:true });
    window.addEventListener('resize', function(){
      const computed = getComputedStyle(document.documentElement);
      const maxW = parseFloat(computed.getPropertyValue('--max-width')) || 820;
      if(window.innerWidth > maxW + 80){
        const left = (window.innerWidth / 2) - (maxW / 2) - 18;
        topBtn.style.left = left + 'px';
      } else {
        topBtn.style.left = '14px';
      }
    });
    updTop();

    if(!(CSS && CSS.supports && CSS.supports('aspect-ratio','16/9'))){
      document.querySelectorAll('.thumb').forEach(t=>{
        function setH(){ t.style.height = (t.clientWidth * 9 / 16) + 'px'; } setH(); window.addEventListener('resize', setH);
      });
    }
  </script>
</body>
</html>
